<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8">
  <title>Лабораторна робота №1 — JavaScript</title>
</head>
<body>

<h1>Лабораторна робота №1</h1>
<h2>Розв’язання прямокутного трикутника засобами JavaScript</h2>

<p>
У даній лабораторній роботі реалізовано JavaScript-функцію
<b>triangle</b>, яка дозволяє знайти всі сторони та гострі кути
прямокутного трикутника за двома заданими величинами.
</p>

<p>
Робота з функцією здійснюється через <b>консоль браузера</b>.
Для цього необхідно відкрити інструменти розробника (клавіша <b>F12</b>),
перейти на вкладку <b>Console</b> та викликати функцію <code>triangle(...)</code>.
</p>

<h3>Формат виклику функції</h3>
<pre>
triangle(значення1, "тип1", значення2, "тип2")
</pre>

<h3>Можливі типи значень</h3>
<ul>
  <li><code>"leg"</code> — катет</li>
  <li><code>"hypotenuse"</code> — гіпотенуза</li>
  <li><code>"adjacent angle"</code> — кут, прилеглий до катета</li>
  <li><code>"opposite angle"</code> — кут, протилежний до катета</li>
  <li><code>"angle"</code> — один з гострих кутів (коли задана гіпотенуза)</li>
</ul>

<p><b>Кути задаються у градусах.</b></p>

<script>
(function () {

  console.log(
    'triangle(value1, "type1", value2, "type2")\n' +
    'Types:\n' +
    'leg — катет\n' +
    'hypotenuse — гіпотенуза\n' +
    'adjacent angle — кут, прилеглий до катета\n' +
    'opposite angle — кут, протилежний до катета\n' +
    'angle — один з гострих кутів (коли задана гіпотенуза)\n' +
    'Angles are in degrees (кути задаються у градусах).\n' +
    'Examples:\n' +
    'triangle(4, "leg", 8, "hypotenuse");\n' +
    'triangle(3, "leg", 4, "leg");'
  );

  function toRadians(deg) {
    return deg * Math.PI / 180;
  }

  function roundValue(x) {
  if (!isFinite(x)) return x;

  var ax = Math.abs(x);
  
  if (ax > 0 && ax < 1e-3) return x;

  if (ax > Number.MAX_VALUE / 1000) return x;

  return Math.round(x * 1000) / 1000;
}

  function triangle(v1, t1, v2, t2) {
    var value1 = Number(v1);
    var value2 = Number(v2);

    if (!isFinite(value1) || !isFinite(value2) || value1 <= 0 || value2 <= 0) {
      console.log("Помилка: значення повинні бути додатними.");
      return "failed";
    }

    t1 = String(t1).toLowerCase().trim();
    t2 = String(t2).toLowerCase().trim();

    var a, b, c, alpha, beta;

    // катет + катет
    if (t1 === "leg" && t2 === "leg") {
      a = value1;
      b = value2;
      c = Math.hypot(a, b); 
    }

    // катет + гіпотенуза
    else if ((t1 === "leg" && t2 === "hypotenuse") ||
             (t2 === "leg" && t1 === "hypotenuse")) {

      var leg = (t1 === "leg") ? value1 : value2;
      var hyp = (t1 === "hypotenuse") ? value1 : value2;

      if (leg >= hyp) {
        console.log("Помилка: катет повинен бути менший за гіпотенузу.");
        return "failed";
      }

      a = leg;
      c = hyp;
      var r = a / c;
      b = c * Math.sqrt(1 - r * r);
    }

    // гіпотенуза + кут
    else if ((t1 === "hypotenuse" && t2 === "angle") ||
             (t2 === "hypotenuse" && t1 === "angle")) {

      c = (t1 === "hypotenuse") ? value1 : value2;
      alpha = (t1 === "angle") ? value1 : value2;

      if (alpha <= 0 || alpha >= 90) {
        console.log("Помилка: кут повинен бути гострим.");
        return "failed";
      }

      a = c * Math.sin(toRadians(alpha));
      b = c * Math.cos(toRadians(alpha));
    }

    // катет + прилеглий або протилежний кут
    else if ((t1 === "leg" && (t2 === "adjacent angle" || t2 === "opposite angle")) ||
             (t2 === "leg" && (t1 === "adjacent angle" || t1 === "opposite angle"))) {

      a = (t1 === "leg") ? value1 : value2;
      alpha = (t1 === "leg") ? value2 : value1;

      if (alpha <= 0 || alpha >= 90) {
        console.log("Помилка: кут повинен бути гострим.");
        return "failed";
      }

      if (t1 === "adjacent angle" || t2 === "adjacent angle") {
        b = a * Math.tan(toRadians(alpha));
        c = a / Math.cos(toRadians(alpha));
      } else {
        b = a / Math.tan(toRadians(alpha));
        c = a / Math.sin(toRadians(alpha));
      }
    }

    else {
      console.log("Помилка: несумісна пара типів.");
      return "failed";
    }

    c = Math.hypot(a, b);

    alpha = Math.asin(a / c) * 180 / Math.PI;
    beta = 90 - alpha;

    console.log(
      "Результат:\n" +
      "a = " + roundValue(a) + "\n" +
      "b = " + roundValue(b) + "\n" +
      "c = " + roundValue(c) + "\n" +
      "alpha = " + roundValue(alpha) + "°\n" +
      "beta = " + roundValue(beta) + "°"
    );

    return "success";
  }

  window.triangle = triangle;

})();
</script>

</body>
</html>
